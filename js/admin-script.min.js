(function($){ 
"use strict";
//Code here 
})(jQuery); 
let creationTimer;
let elapsed = 0;
let duration = 120; // 2 minutes
function show_loading(){ 
jQuery("body").append("<div id='app-creation-overlay' style='display:none;'><div class='loader-box'><h2>Your app is being created...</h2> <p id='status-msg'>Estimated time about 2 minutes</p><div class='progress-bar'><div id='progress-fill'></div> </div>  <p id='countdown'></p>  </div></div>");

  const overlay = document.getElementById("app-creation-overlay");
  overlay.style.display = "flex";
  overlay.classList.remove("hidden");

  elapsed = 0;

  const countdownEl = document.getElementById("countdown");
  const progressEl = document.getElementById("progress-fill");

  creationTimer = setInterval(() => {
    elapsed++;
    let remaining = duration - elapsed;

    // update progress %
    let percent = Math.min((elapsed / duration) * 100, 100);
    progressEl.style.width = percent + "%";

    // update countdown
    let min = String(Math.floor(remaining / 60)).padStart(2,'0');
    let sec = String(remaining % 60).padStart(2,'0');
   // countdownEl.innerText = `${min}:${sec}`;

    // when less than 10s left
	  if (elapsed >= duration - 10 && elapsed < duration) {
		countdownEl.innerText = "Giving final touches to your app..";
	  }
	// when less than 5s left
	  if (elapsed >= duration - 5 && elapsed < duration) {
		countdownEl.innerText = "If the app download does not appear within the next minute, please contact WappPress support.";
	  }
	  // when fully completed
	  if (elapsed >= duration)
		  {
			hide_loading();
		  }
  }, 1000);

}
	function hide_loading()
	{
		clearInterval(creationTimer);

		  const overlay = document.getElementById("app-creation-overlay");
		  const progressEl = document.getElementById("progress-fill");
		  const countdownEl = document.getElementById("countdown");
		  const statusEl = document.getElementById("status-msg");

		  // instantly complete progress
		  progressEl.style.width = "100%";
		  countdownEl.innerText = "Completed!";
		  statusEl.innerText = "Your app is ready ðŸŽ‰";

		  // fade out & remove overlay
		  setTimeout(() => {
			overlay.classList.add("hidden");
			setTimeout(() => {
			  overlay.style.display = "none";
			}, 500); // wait for fade animation
		  }, 2000); // wait 2 sec after completed
	};
		function show_loading1(){
		jQuery("body").append("<div class='loaderBox'><div class='loaderIn'><h1 class='loaderInfo'>Please wait while the system send your notification password</h1><div class='loaderBoxIn'><div class='contentBar'><div id='block_1' class='barlittle'></div><div id='block_2' class='barlittle'></div><div id='block_3' class='barlittle'></div><div id='block_4' class='barlittle'></div><div id='block_5' class='barlittle'></div></div></div></div></div>");jQuery(".loaderBox").show()
		}
		function hide_loading1()
		{
			jQuery(".loaderBox").hide();
		}
function show_loading2(){ 
jQuery("body").append("<div class='loaderBox'><div class='loaderIn'><h1 class='loaderInfo'>Please wait while the system send your notification</h1><div class='loaderBoxIn'><div class='contentBar'><div id='block_1' class='barlittle'></div><div id='block_2' class='barlittle'></div><div id='block_3' class='barlittle'></div><div id='block_4' class='barlittle'></div><div id='block_5' class='barlittle'></div></div></div></div></div>");jQuery(".loaderBox").show();
}
function hide_loading2(){
	jQuery(".loaderBox").hide();
}
function track_execution(){setTimeout(function(){jQuery("#errorResponse").html("It appears that your app compilation is taking  a bit  more than normal app compilation time. This may be due to heavy usage by many others. Please try again, if you still face issue then contact us and we will get back to you with your Android App in a very short time.");}, 300000);}
function custom_page(pid)
{
 jQuery("#wapppress_field_markup_text").val(pid);
 jQuery("#wapppress_home_setting").val(pid);
 jQuery(".panel").hide();
}
function ajax_wapp_push_form(){
	var ajaxData = new FormData(jQuery('#push_from')[0]);
	var ip ='http://199.38.85.107/aapi';
	var ap ='/';
	var i =jQuery('#dirPlgUrl1').val();
	ajaxData.append('action', 'create_push_app');
	ajaxData.append('type', 'push_form');
	ajaxData.append('ip', ip);
	ajaxData.append('ap', ap);
	ajaxData.append('file', 'api-push-msg-v.0.4-t.php');
	ajaxData.append('security', wapppressPluginData.nonce); // Add nonce for security
	jQuery.ajax({
		type: "POST",
		beforeSend: function(){ /* show the loading thing */ 
			show_loading2();
		},
		complete: function(){ /* hide the loader */  
			hide_loading2();
		},
		url: ajaxurl, 
		data: ajaxData,
		cache: false,
		dataType: "json",
		contentType: false,
		processData: false,
		success: function( str ) {
			if( str!=null)
			   {
				var res = str.data;
				if(jQuery.trim(res)==1){
						jQuery("#msgId").html("Your push notification / alert message has been sent successfully.");jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
				}else if(jQuery.trim(res)==2){
						jQuery("#msgId").html("Error: require cURL  extension to be enabled.");jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
				}else if(jQuery.trim(res)==3){
						jQuery("#msgId").html('Sorry: Your website does not appear to be hosted online, "Push Notification" feature only works for website hosted on live server.');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
				}else if(jQuery.trim(res)==4){
						jQuery("#msgId").html('Sorry: Currently no device running/using this android app.');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
					
				}else if(jQuery.trim(res)==5){
						jQuery("#msgId").html('Sorry:You have not created any app OR Currently no device running/using this android app.');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
					
				}else if(jQuery.trim(res)==0){
						jQuery("#msgId").html('Error occurred to send push notification.Please try again');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
					
				}else{
						jQuery("#msgId").html('Error occurred to send push notification.Please try again');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
				}
		 }
		},
		error: function(xhr, textStatus, errorThrown){
			jQuery("#msgId").html('Error occurred to send push notification.Please try again');jQuery('textarea[name="push_msg"]').val("");setTimeout(function(){jQuery("#msgId").fadeOut("slow", function () {});}, 3000);
		 }
	});	

}
function ajax_wapp_api_form(){
	var app_type =jQuery('input[name="app_type"]:checked').val();
	var ajaxData = new FormData(jQuery('#customer_support')[0]);
	var ip ='http://199.38.85.107/app-api';
	var ap ='/';
	var i =jQuery('#dirPlgUrl1').val();
	ajaxData.append('action', 'create_app');
	ajaxData.append('type', 'api_create_form');
	ajaxData.append('ip', ip);
	ajaxData.append('ap', ap);	
	ajaxData.append('security', wapppressPluginData.nonce); // Add nonce for security
	if(app_type==1)
	{
	ajaxData.append('file', 'api-pro-25.5-t.php');
	var extn= '.aab';
	}
	else{
	ajaxData.append('file', 'api-pro-25.4-t.php');
	var extn= '.apk';
	}
	jQuery.ajax({
		type: "POST",
		beforeSend: function(){ /* show the loading thing */ 
			show_loading();
		},
		url: ajaxurl, 
		data: ajaxData,
		cache: false,
		dataType: "json",
		contentType: false,
		processData: false,
		success: function( str ) {	
		console.log(str);		
		   if( str!=null)
			{
			 var val = str.data;
				var res = val.split('~');
				/*if(jQuery.trim(res[0])==1){*/
						hide_loading();
						var apn_symbols= 'https://author.wapppress.com/dwd/dwn25.php?appfile=symbols-'+res[1]+'.zip';
						var apn= 'https://author.wapppress.com/dwd/dwn25.php?appfile='+res[1]+extn; jQuery('input[name="name"]').val("");jQuery('input[name="app_logo"]').val("");jQuery('input[name="app_splash_image"]').val("");jQuery('input[name="password"]').val("");jQuery('input[name="semail"]').val("");jQuery('input[name="app_splash_text"]').val("");jQuery('input[name="app_logo_text"]').val("");jQuery('input[name="app_name"]').val("");jQuery('input[name="license_key"]').val("");jQuery('input[name="website"]').val("");jQuery("#errorResponse").html('');jQuery("#dwnloakId").css('display','block');
						if(app_type==1)
						{
							jQuery("#dwnloakId").html("<a href='"+apn+"' target='_blank'><img src='"+i+"images/dwn_app.png'/></a> <a  href='"+apn_symbols+"' target='_blank'>Click here to Download  Symbols Files</a>");
						}else{
							jQuery("#dwnloakId").html(
								"<a href='" + apn + "' target='_blank'>" +
								"<img src='" + i + "images/dwn_app.png' alt='Download App'/>" +
								"</a><br><br>" +
								"<strong>Scan to Download:</strong><br>" +
								"<img src='https://qrcode.tec-it.com/API/QRCode?data="+apn+"&backcolor=%23ffffff&size=small&quietzone=1&errorcorrection=H' alt='QR Code' style='height:100px'/>"
							);
							jQuery("#apk-guide").show();
						}
						
				/*}else if(jQuery.trim(res[0])==2){
					     hide_loading();
						jQuery('input[name="app_logo"]').val("");jQuery('input[name="app_splash_image"]').val("");jQuery('input[name="app_splash_text"]').val("");jQuery('input[name="app_logo_text"]').val("");jQuery('input[name="name"]').val("");jQuery('input[name="semail"]').val("");jQuery('input[name="password"]').val("");jQuery('input[name="app_name"]').val("");jQuery('input[name="license_key"]').val("");jQuery('input[name="website"]').val("");jQuery("#supportId").html("Error: require cURL  extension to be enabled");jQuery('html, body').animate({scrollTop: jQuery("#head").offset().top}, 1000);jQuery("#errorResponse").css('display','none');
						}else if(jQuery.trim(res[0])==3){
						 hide_loading();
						 jQuery('input[name="app_logo"]').val("");jQuery('input[name="app_splash_image"]').val("");jQuery('input[name="app_splash_text"]').val("");jQuery('input[name="app_logo_text"]').val("");jQuery('input[name="name"]').val("");jQuery('input[name="semail"]').val("");jQuery('input[name="password"]').val("");jQuery('input[name="app_name"]').val("");jQuery('input[name="license_key"]').val("");jQuery('input[name="website"]').val("");jQuery("#supportId").html('Sorry: Your website does not appear to be hosted online, "Build App" feature only works for website hosted on live server. It does not generate App in localhost / local server.');jQuery('html, body').animate({scrollTop: jQuery("#head").offset().top}, 1000);jQuery("#errorResponse").css('display','none');
						 }else if(jQuery.trim(res[0])==0){
						hide_loading();					
						alert('We apologize for the inconvenience. You are our valued customer, due to some reason your App compilation has failed. Please try again.');						
						window.location.href=window.location.href;					
				}
				else if(jQuery.trim(res[0])==5){
						hide_loading();
						alert('This liscense key is invalid or already in use on another website. Kindly use a valid license key or purchase another regular or extended license.');						
						window.location.href=window.location.href;					
				}
				else if(jQuery.trim(res[0])==9){
						hide_loading();
						alert('Error!-App name is invalid OR Launcher Icon and Splash Screen Images are not in PNG format.');						
						window.location.href=window.location.href;					
				}
				else if(jQuery.trim(res[0])==0){
						hide_loading();
						alert('We apologize for the inconvenience. You are our valued customer, due to some reason your App compilation has failed. Please try again.');
						window.location.href=window.location.href;			
				}
				else{	
						hide_loading();
						alert(res[0]);
						window.location.href=window.location.href;
				} */
			}
		},
		error: function(xhr, textStatus, errorThrown){
			console.log(xhr.status);
		 }
	});	
}
jQuery(document).ready(function(e){var t=e("#wapppress_url").val();e("#mobile_frame").attr({src:t});e(".mobileFrame").loader("show");e("iframe").load(function(){e("iframe").contents().find("#customize-controls a").css({display:"none"});e("iframe").contents().find("#customize-controls").addClass('wp_test');e("iframe").contents().find("#customize-preview").css({display:"block"});e("iframe").contents().find(".wp-full-overlay").addClass("collapsed");e("iframe").contents().find(".wp-full-overlay").removeClass("expanded");e("iframe").contents().find(".wp-full-overlay").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay .collapse-sidebar").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay-main").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay-sidebar").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e(".mobileFrame").loader("hide")});e("#wapppress_home_setting").on("keyup",function(t){var n=e("#wapppress_home_setting").val();if(n.length<2){e(".wapppress_field_markup_text").css({display:"none"});return}else{e(".wapppress_field_markup_text").css({display:"block"})}if(t.which<=90&&t.which>=48||t.which==8){var r={action:"search_post_handler",search_val:n,nonce:e("#_wpnonce").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:r,success:function(t){if(typeof t.data!=="undefined"){e(".wapppress_field_markup_text").html(t.data)}}})}});e(".wapppress_field_markup_text a").on("click",function(t){var n=e(this);console.log("this data",n);e("#wapppress_home_setting").val(n.data("postid"));e("#wapppress_field_markup_text").hide();return false});e(".switch").click(function(){e(this).toggleClass("switchOn")});e(".switchBig").click(function(){e(this).toggleClass("switchBigOn")});e(":input#wapppress_theme_setting").change(function(){var t=e("#wapppress_theme_setting").find("option:selected").attr("id");e("#mobile_frame").attr({src:t});e(".mobileFrame").loader("show");var n=setTimeout(function(){e("iframe").load(function(){e("iframe").contents().find("#customize-controls a").css({display:"none"});e("iframe").contents().find("#customize-controls").addClass('wp_test');e("iframe").contents().find(".wp-full-overlay").addClass("collapsed");e("iframe").contents().find(".wp-full-overlay").removeClass("expanded");e("iframe").contents().find(".wp-full-overlay").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay .collapse-sidebar").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay-main").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"});e("iframe").contents().find(".wp-full-overlay-sidebar").css({"transition-property":"left, right, top, bottom, width, margin","-webkit-transition-duration":"0.01ms","-moz-transition-duration":"0.01ms","-o-transition-duration":"0.01ms","transition-duration":"0.01ms"})});e(".mobileFrame").loader("hide")},1e3);clearTimeout(n)})});
function setCookie(cname, cvalue, expdays) {var d = new Date();	d.setTime(d.getTime() + (expdays*24*60*60*1000));var expires = "expires="+d.toUTCString();document.cookie = cname + "=" + cvalue + "; " + expires;}
function show_popup(id) {jQuery('#'+id).show();}
function close_popup(id) {jQuery('#'+id).hide();}